<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" xml:lang="en-us">
<head>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">

    <title>Sentinelle</title>
    <!-- JQuery -->
    <script type='text/javascript' src='./js/jquery-2.1.1.min.js'></script>
    <script type='text/javascript' src='./js/bootstrap.min.js'></script>
    <script type='text/javascript' src='./js/slidebars.js'></script>
    <script type='text/javascript' src='./js/jquery.autocomplete.js'></script>
    <script type='text/javascript' src='./js/FaviconAwesome.js'></script>
    <script type='text/javascript' src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="./css/slidebars.css" type="text/css">
    <link rel="stylesheet" href="./css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="./css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="./css/sentinelle.css" type="text/css">
</head>
<body id="top">
<script>
    var accessPointsList = [];
    var associationList = [];
    var stationsList = [];
    var socket = io.connect('http://10.0.10.3:80');
    socket.on('new_access_point', function(access_point) {
        accessPointsList.push(access_point);
        display_infra_ap(access_point);

    });

    function display_infra_ap(access_point){
        $("#article_infra").append("<div class='infra_ap'>"
                + "BSSID: " + convert_mac(access_point["BSSID"]) + "<br>"
                + "SSID: " + access_point["SSID"] + "<br>"
                + "Channel: " + access_point["channel"] + "<br>"
                + "Country: " + access_point["country"] + "<br>"
                + "Rates: " + access_point["rates"] + "<br>"
                + "Extended Rates: " + access_point["extended_rates"] + "<br>"
                + "Raw Data: " +access_point["beacon"] + "<br>"
                + "</div>"
        );
  /*      console.log(access_point["BSSID"]);
        console.log(access_point['beacon']['tags']);
        for (var tag in access_point['beacon']['tags']){
            if (access_point['beacon']['tags'][tag].hasOwnProperty("typeId")){
                switch (access_point['beacon']['tags'][tag]["typeId"]) {
                    case 0:
                            var value = access_point['beacon']['tags'][tag]['value'].slice(0, access_point['beacon']['tags'][tag]['value'].length);
                        console.log(value.toString());
                }
            }

        }*/
    }

    function convert_mac(mac_param){
        var mac_result = "";;
        for (var mbyte in mac_param){
            mac_result += parseInt(mac_param[mbyte]).toString(16);
        }
        return mac_result;
    }
</script>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container" style="width:80%" >
        <!-- Logo -->
        <div id="logo" class="nav navbar-nav navbar-left" style="padding-top: 5px;">
            <i class="fa fa-3x fa-connectdevelop"></i>
            <a href="#">Sentinelle</a>
        </div>
        <!-- /#logo -->

        <!-- Menu -->
        <ul class="nav navbar-nav navbar-right">
            <li id="nav_display_preview">
                <a href="#" onclick="select_tab('display_home')">
                    <i class="fa fa-sitemap fa-lg"></i>
                    <span> Infrastructure</span>
                </a>
            </li>
            <li id="nav_display_search">
                <a href="#" onclick="select_tab('display_ap')">
                    <i class="fa fa-rss fa-lg"></i>
                    <span> AP Details</span>
                </a>
            </li>
            <li id="nav_display_detail">
                <a href="#" onclick="select_tab('display_sta')">
                    <i class="fa fa-laptop fa-lg"></i>
                    <span> STA Details</span>
                </a>
            </li>
            <li id="nav_display_detail">
                <a href="#" onclick="select_tab('display_config')">
                    <i class="fa fa-gears fa-lg"></i>
                    <span> Config</span>
                </a>
            </li>
            <li id="nav_about">
                <a href="#" onclick="select_tab('about')">
                    <i class="fa fa-question fa-lg"></i>
                    <span> About</span>
                </a>
            </li>
            <li>
                <a id="top-arrow" href="#top">^
                    <span> Top</span>
                </a>
            </li>
        </ul>
    </div>
</nav>
<!-- main container -->
<div  id="sb-site">
    <!-- mib viewer - this section will display the article to load MIB files -->
    <section class="sb-site-content" id="section_action">
        <article style="display: flex;">
            <div style="width: 40%">
                <span style="margin-left: 5px;">Start/Stop capture</span>
                <input style="margin-top: 5px;" type="button" id="clear_mib_selection" value="start_stop">

            </div>
        </article>
    </section>
    <!-- mib viewer - this section will display the MIB files details -->
    <section class="sb-site-content" id="section_infra">
        <article id="article_infra">

        </article>
    </section>
    <!-- mib viewer - this section will display MIB tree -->
    <section class="sb-site-content" id="section_ap" hidden="hidden">
        <article style="display: flex">

        </article>
    </section>
    <!-- mib viewer - this section will display MIB tree -->
    <section class="sb-site-content" id="section_sta" hidden="hidden">
        <article style="display: flex">

        </article>
    </section>
    <!-- mib viewer - this section will display MIB tree -->
    <section class="sb-site-content" id="section_conf" hidden="hidden">
        <article style="display: flex">

        </article>
    </section>
    <!-- mib viewer - this section will display the About article -->
    <section class="sb-site-content" id="mib_about" hidden="hidden">
        <article>

        </article>
    </section>
    <!-- mib viewer - this section will display search tool -->
    <section class="sb-site-content" id="mib_display_search" hidden="hidden">
        <article style="display: flex">

        </article>

    </section>

</div>
<!-- mib viewer - this is the right pane to display infos  -->
<nav id="info_details" class="sb-slidebar sb-right sb-style-push">
    <div id="info_details_content" style="margin-top: 100px;">
    </div>
    <div>
        <a class='btn menu-link' id="sb-close" style='float: left; padding-right: 10px; padding-top: 10px;'>Close <i
                    class='fa fa-times-circle'></i></a>
    </div>
</nav>
<script> FaviconAwesome('fa-connectdevelop', '#0093D1'); </script>
<script>
    var tabs = ["display_search", "display_preview", "display_detail", "about"];
    function select_tab(tab_name) {
        mySlidebars.slidebars.close();
        if (tab_name.indexOf("display_") < 0) {
            $("#mib_display_select").hide();
        } else {
            $("#mib_display_select").show();
        }
        for (var i in tabs) {
            if (tabs.hasOwnProperty(i)) {
                if (tabs[i] == tab_name) {
                    $("#mib_" + tabs[i]).show();
                    document.getElementById("nav_" + tabs[i]).className = "nav_selected";
                } else {
                    $("#mib_" + tabs[i]).hide();
                    document.getElementById("nav_" + tabs[i]).className = "";
                }
            }
        }

    }
</script>
</body>
</html>
